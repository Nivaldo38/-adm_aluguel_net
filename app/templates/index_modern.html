{% extends "base_modern.html" %}

{% block title %}Dashboard - AluguelNet{% endblock %}
{% block page_title %}Dashboard{% endblock %}
{% block page_subtitle %}Vis√£o geral do seu neg√≥cio{% endblock %}

{% block content %}
<!-- Stats Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="stats-card card-hover">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">Total de Contratos</p>
                <h3 class="text-3xl font-bold text-gray-900">{{ contratos|length }}</h3>
                <p class="text-sm text-green-600 mt-1">
                    <i class="fas fa-arrow-up mr-1"></i>
                    +12% este m√™s
                </p>
            </div>
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-file-contract text-blue-600 text-xl"></i>
            </div>
        </div>
    </div>
    
    <div class="stats-card card-hover">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">Inquilinos Ativos</p>
                <h3 class="text-3xl font-bold text-gray-900">{{ inquilinos|length }}</h3>
                <p class="text-sm text-green-600 mt-1">
                    <i class="fas fa-arrow-up mr-1"></i>
                    +5% este m√™s
                </p>
            </div>
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-users text-green-600 text-xl"></i>
            </div>
        </div>
    </div>
    
    <div class="stats-card card-hover">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">Locais Dispon√≠veis</p>
                <h3 class="text-3xl font-bold text-gray-900">{{ locais|length }}</h3>
                <p class="text-sm text-blue-600 mt-1">
                    <i class="fas fa-info-circle mr-1"></i>
                    {{ unidades_disponiveis }} unidades
                </p>
            </div>
            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-building text-purple-600 text-xl"></i>
            </div>
        </div>
    </div>
    
    <div class="stats-card card-hover">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">Receita Mensal</p>
                <h3 class="text-3xl font-bold text-gray-900">R$ {{ "%.2f"|format(receita_mensal) }}</h3>
                <p class="text-sm text-green-600 mt-1">
                    <i class="fas fa-arrow-up mr-1"></i>
                    +8% este m√™s
                </p>
            </div>
            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-money-bill-wave text-yellow-600 text-xl"></i>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <div class="stats-card">
        <h3 class="text-lg font-semibold mb-4">‚ö° A√ß√µes R√°pidas</h3>
        <div class="grid grid-cols-2 gap-4">
            <a href="{{ url_for('cadastrar_contrato') }}" class="btn-modern text-center">
                <i class="fas fa-plus mr-2"></i>
                Novo Contrato
            </a>
            <a href="{{ url_for('cadastrar_inquilino') }}" class="btn-modern text-center">
                <i class="fas fa-user-plus mr-2"></i>
                Novo Inquilino
            </a>
            <a href="{{ url_for('cadastrar_local') }}" class="btn-modern text-center">
                <i class="fas fa-building mr-2"></i>
                Novo Local
            </a>
            <a href="{{ url_for('gerar_boletos_lote') }}" class="btn-modern text-center">
                <i class="fas fa-file-invoice mr-2"></i>
                Gerar Boletos
            </a>
        </div>
    </div>
    
    <div class="stats-card">
        <h3 class="text-lg font-semibold mb-4">üìä Status dos Contratos</h3>
        <div class="space-y-3">
            <div class="flex items-center justify-between">
                <span class="text-sm text-gray-600">Ativos</span>
                <span class="badge badge-success">{{ contratos_ativos }}</span>
            </div>
            <div class="flex items-center justify-between">
                <span class="text-sm text-gray-600">Pendentes</span>
                <span class="badge badge-warning">{{ contratos_pendentes }}</span>
            </div>
            <div class="flex items-center justify-between">
                <span class="text-sm text-gray-600">Vencidos</span>
                <span class="badge badge-danger">{{ contratos_vencidos }}</span>
            </div>
            <div class="flex items-center justify-between">
                <span class="text-sm text-gray-600">Assinados</span>
                <span class="badge badge-info">{{ contratos_assinados }}</span>
            </div>
        </div>
    </div>
</div>

<!-- Recent Contracts -->
<div class="stats-card">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-lg font-semibold">üìã Contratos Recentes</h3>
        <a href="{{ url_for('listar_contratos') }}" class="text-blue-600 hover:text-blue-800 text-sm">
            Ver todos <i class="fas fa-arrow-right ml-1"></i>
        </a>
    </div>
    
    {% if contratos_recentes %}
    <div class="table-modern">
        <table class="w-full">
            <thead>
                <tr>
                    <th>Inquilino</th>
                    <th>Local/Unidade</th>
                    <th>Valor</th>
                    <th>Status</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% for contrato in contratos_recentes[:5] %}
                <tr>
                    <td>
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                <i class="fas fa-user text-blue-600 text-sm"></i>
                            </div>
                            <div>
                                <p class="font-medium">{{ contrato.inquilino.nome }}</p>
                                <p class="text-sm text-gray-500">{{ contrato.inquilino.email }}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        <p class="font-medium">{{ contrato.unidade.local.nome }}</p>
                        <p class="text-sm text-gray-500">{{ contrato.unidade.nome }}</p>
                    </td>
                    <td>
                        <p class="font-medium">R$ {{ "%.2f"|format(contrato.valor_aluguel) }}</p>
                        <p class="text-sm text-gray-500">{{ contrato.data_inicio.strftime('%d/%m/%Y') }}</p>
                    </td>
                    <td>
                        {% if contrato.status == 'ativo' %}
                            <span class="badge badge-success">Ativo</span>
                        {% elif contrato.status == 'pendente' %}
                            <span class="badge badge-warning">Pendente</span>
                        {% elif contrato.status == 'vencido' %}
                            <span class="badge badge-danger">Vencido</span>
                        {% else %}
                            <span class="badge badge-info">{{ contrato.status|title }}</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="flex space-x-2">
                            <a href="{{ url_for('visualizar_contrato', contrato_id=contrato.id) }}" 
                               class="text-blue-600 hover:text-blue-800" title="Visualizar">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a href="{{ url_for('editar_contrato', contrato_id=contrato.id) }}" 
                               class="text-green-600 hover:text-green-800" title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-8">
        <i class="fas fa-file-contract text-gray-400 text-4xl mb-4"></i>
        <p class="text-gray-500">Nenhum contrato encontrado</p>
        <a href="{{ url_for('cadastrar_contrato') }}" class="btn-modern mt-4">
            <i class="fas fa-plus mr-2"></i>
            Criar Primeiro Contrato
        </a>
    </div>
    {% endif %}
</div>

<!-- System Info -->
<div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="stats-card">
        <h4 class="font-semibold mb-2">üîÑ Backup</h4>
        <p class="text-sm text-gray-600 mb-3">√öltimo backup realizado</p>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">H√° 2 horas</span>
            <span class="badge badge-success">OK</span>
        </div>
    </div>
    
    <div class="stats-card">
        <h4 class="font-semibold mb-2">üìß Notifica√ß√µes</h4>
        <p class="text-sm text-gray-600 mb-3">Emails enviados hoje</p>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">3 notifica√ß√µes</span>
            <span class="badge badge-info">Enviado</span>
        </div>
    </div>
    
    <div class="stats-card">
        <h4 class="font-semibold mb-2">üîê DS4</h4>
        <p class="text-sm text-gray-600 mb-3">Assinaturas pendentes</p>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">2 contratos</span>
            <span class="badge badge-warning">Pendente</span>
        </div>
    </div>
</div>
{% endblock %} 